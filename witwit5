-- Services
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TS = game:GetService("TweenService")

-- Multiplier variable
local multiplier = 1 -- Change as needed

-- Toggle state storage
local toggles = {}

-- Load Spawner library
local Spawner = loadstring(game:HttpGet("https://raw.githubusercontent.com/ataturk123/GardenSpawner/refs/heads/main/Spawner.lua"))()

-- UI Setup
local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Name = "RinHubUI"
gui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 260, 0, 310)
main.Position = UDim2.new(0.5, -130, 0.5, -155)
main.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
main.BorderSizePixel = 0
main.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = main

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.fromRGB(9, 255, 182)
stroke.Thickness = 2
stroke.Transparency = 0.3
stroke.Parent = main

-- Background
local bg = Instance.new("Frame")
bg.Size = UDim2.new(1, -10, 1, -40)
bg.Position = UDim2.new(0, 5, 0, 35)
bg.BackgroundColor3 = Color3.fromRGB(9, 255, 182)
bg.BorderSizePixel = 0
bg.Parent = main

local bgCorner = Instance.new("UICorner")
bgCorner.CornerRadius = UDim.new(0, 6)
bgCorner.Parent = bg

-- Title Bar
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.BackgroundTransparency = 1
titleBar.Parent = main

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Rin Hub"
title.TextColor3 = Color3.fromRGB(0, 0, 0)
title.TextSize = 16
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- Minimize Button
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 25, 0, 25)
minimizeBtn.Position = UDim2.new(1, -55, 0, 2)
minimizeBtn.AnchorPoint = Vector2.new(1, 0)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
minimizeBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
minimizeBtn.Text = "_"
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.TextSize = 18
minimizeBtn.Parent = titleBar

local minCorner = Instance.new("UICorner")
minCorner.CornerRadius = UDim.new(0, 6)
minCorner.Parent = minimizeBtn

-- Exit Button
local exitBtn = Instance.new("TextButton")
exitBtn.Size = UDim2.new(0, 25, 0, 25)
exitBtn.Position = UDim2.new(1, -25, 0, 2)
exitBtn.AnchorPoint = Vector2.new(1, 0)
exitBtn.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
exitBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
exitBtn.Text = "X"
exitBtn.Font = Enum.Font.GothamBold
exitBtn.TextSize = 14
exitBtn.Parent = titleBar

local exitCorner = Instance.new("UICorner")
exitCorner.CornerRadius = UDim.new(0, 6)
exitCorner.Parent = exitBtn

-- Content Frame
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -10, 1, -70)
contentFrame.Position = UDim2.new(0.5, 0, 0, 60)
contentFrame.AnchorPoint = Vector2.new(0.5, 0)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = main

-- Tab Bar
local tabBar = Instance.new("Frame")
tabBar.Size = UDim2.new(1, -10, 0, 25)
tabBar.Position = UDim2.new(0, 5, 0, 35)
tabBar.BackgroundTransparency = 1
tabBar.Parent = main

local tabLayout = Instance.new("UIListLayout")
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabLayout.Padding = UDim.new(0, 5)
tabLayout.Parent = tabBar

-- Tab Frames Table
local tabFrames = {}

-- Create Tab Button Function
local function createTabButton(name)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 60, 0, 25)
    btn.Text = name
    btn.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
    btn.TextColor3 = Color3.fromRGB(0, 0, 0)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 12
    btn.Parent = tabBar

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn

    local tabFrame = Instance.new("Frame")
    tabFrame.Size = contentFrame.Size
    tabFrame.Position = UDim2.new(0, 0, 0, 0)
    tabFrame.BackgroundTransparency = 1
    tabFrame.Visible = false
    tabFrame.Parent = contentFrame

    local tabList = Instance.new("UIListLayout")
    tabList.Padding = UDim.new(0, 10)
    tabList.SortOrder = Enum.SortOrder.LayoutOrder
    tabList.HorizontalAlignment = Enum.HorizontalAlignment.Center
    tabList.VerticalAlignment = Enum.VerticalAlignment.Top
    tabList.Parent = tabFrame

    tabFrames[name] = tabFrame

    btn.MouseButton1Click:Connect(function()
        for _, frame in pairs(tabFrames) do
            frame.Visible = false
        end
        tabFrame.Visible = true
    end)

    return tabFrame
end

local function createPetInputWithDetails(tabFrame)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(0, 200, 0, 140)
    container.Position = UDim2.new(0.5, 0, 0, 10)
    container.AnchorPoint = Vector2.new(0.5, 0)
    container.BackgroundTransparency = 1
    container.Parent = tabFrame

    local nameBox = Instance.new("TextBox")
    nameBox.Size = UDim2.new(1, 0, 0, 25)
    nameBox.PlaceholderText = "Enter pet name..."
    nameBox.Text = ""
    nameBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    nameBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    nameBox.Font = Enum.Font.Gotham
    nameBox.TextSize = 14
    nameBox.Parent = container

    local ageBox = Instance.new("TextBox")
    ageBox.Size = UDim2.new(1, 0, 0, 25)
    ageBox.Position = UDim2.new(0, 0, 0, 30)
    ageBox.PlaceholderText = "Enter age..."
    ageBox.Text = ""
    ageBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ageBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    ageBox.Font = Enum.Font.Gotham
    ageBox.TextSize = 14
    ageBox.Parent = container

    local weightBox = Instance.new("TextBox")
    weightBox.Size = UDim2.new(1, 0, 0, 25)
    weightBox.Position = UDim2.new(0, 0, 0, 60)
    weightBox.PlaceholderText = "Enter weight..."
    weightBox.Text = ""
    weightBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    weightBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    weightBox.Font = Enum.Font.Gotham
    weightBox.TextSize = 14
    weightBox.Parent = container

    local spawnButton = Instance.new("TextButton")
    spawnButton.Size = UDim2.new(1, 0, 0, 25)
    spawnButton.Position = UDim2.new(0, 0, 0, 90)
    spawnButton.Text = "Spawn Pet"
    spawnButton.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
    spawnButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    spawnButton.Font = Enum.Font.GothamBold
    spawnButton.TextSize = 14
    spawnButton.Parent = container

    spawnButton.MouseButton1Click:Connect(function()
        if nameBox.Text ~= "" and ageBox.Text ~= "" and weightBox.Text ~= "" then
            Spawner.SpawnPet(nameBox.Text, tonumber(ageBox.Text), tonumber(weightBox.Text))
        end
    end)
end

local function createTabInputWithButton(tabFrame, buttonText, callback)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(0, 200, 0, 60)
    container.Position = UDim2.new(0.5, 0, 0, 20)
    container.AnchorPoint = Vector2.new(0.5, 0)
    container.BackgroundTransparency = 1
    container.Parent = tabFrame

    local inputBox = Instance.new("TextBox")
    inputBox.Size = UDim2.new(1, 0, 0, 30)
    inputBox.PlaceholderText = "Enter name..."
    inputBox.Text = ""
    inputBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    inputBox.TextColor3 = Color3.fromRGB(0, 0, 0)
    inputBox.Font = Enum.Font.Gotham
    inputBox.TextSize = 14
    inputBox.Parent = container

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = inputBox

    local spawnButton = Instance.new("TextButton")
    spawnButton.Size = UDim2.new(1, 0, 0, 25)
    spawnButton.Position = UDim2.new(0, 0, 0, 35)
    spawnButton.Text = buttonText
    spawnButton.BackgroundColor3 = Color3.fromRGB(3, 244, 202)
    spawnButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    spawnButton.Font = Enum.Font.GothamBold
    spawnButton.TextSize = 14
    spawnButton.Parent = container

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 6)
    btnCorner.Parent = spawnButton

    spawnButton.MouseButton1Click:Connect(function()
        if inputBox.Text ~= "" then
            callback(inputBox.Text)
        end
    end)
end

-- Create Tabs
local petTab = createTabButton("Pet")
local seedTab = createTabButton("Seed")
local eggTab = createTabButton("Egg")
local spinTab = createTabButton("Spin")

-- Input fields for manual spawning
createPetInputWithDetails(petTab)

createTabInputWithButton(seedTab, "Spawn Seed", function(name)
    Spawner.SpawnSeed(name)
end)

createTabInputWithButton(eggTab, "Spawn Egg", function(name)
    Spawner.SpawnEgg(name)
end)

createTabInputWithButton(spinTab, "Spin", function(name)
    Spawner.Spin(name)
end)

-- Show first tab by default
tabFrames["Pet"].Visible = true

-- Minimize
local minimized = false
local originalSize = main.Size
local minimizedSize = UDim2.new(0, 260, 0, 30)

minimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    TS:Create(main, TweenInfo.new(0.3), {
        Size = minimized and minimizedSize or originalSize
    }):Play()
    contentFrame.Visible = not minimized
    bg.Visible = not minimized
end)

-- Exit
exitBtn.MouseButton1Click:Connect(function()
    TS:Create(main, TweenInfo.new(0.2), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0)
    }):Play()
    task.wait(0.2)
    gui:Destroy()
end)

-- Dragging
local dragging, dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    main.Position = UDim2.new(
        startPos.X.Scale,
        startPos.X.Offset + delta.X,
        startPos.Y.Scale,
        startPos.Y.Offset + delta.Y
    )
end

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = main.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

UIS.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        update(input)
    end
end)
